<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Aanmaken</title>
    <link rel="stylesheet" href="Docenten.css"> <!-- Link naar de CSS -->
</head>
<body>

<!-- Header met logo en navigatie -->
<div class="logo-container">
    <div class="logo_img">
        <img src="images/i_lab.png" alt="I-lab logo" style="width: 80px;">
    </div>
    <div class="link">
        <a href="Dashboard.html">Terug naar Dashboard</a>
        <a href="QuizStart.html">Bekijk Quiz</a>
    </div>
</div>

<!-- Hoofdcontainer -->
<div class="main-content">
    <!-- Zijmenu links -->
    <div class="opdrachten" id="leftMenu">
        <h3>Vragenlijst</h3>
        <ul id="questionList">
            <!-- Dynamische vragen worden hier toegevoegd -->
        </ul>
    </div>

    <!-- Quiz-aanmaakformulier -->
    <div class="container">
        <h2>Aanmaken van een nieuwe Quiz</h2>
        <form id="quizForm">
            <div class="content" id="quizNameSection">
                <label for="quizName">Quiznaam:</label>
                <input type="text" id="quizName" name="quizName" required>
            </div>

            <div class="content">
                <label for="quizVideo">Voeg een video toe:</label>
                <input type="file" id="quizVideo" name="quizVideo" accept="video/*">
            </div>

            <div class="content">
                <label for="quizImage">Voeg een afbeelding toe:</label>
                <input type="file" id="quizImage" name="quizImage" accept="image/*">
            </div>

            <div class="content">
                <label for="questionType">Selecteer vraagtype:</label>
                <select id="questionType" name="questionType" required>
                    <option value="" disabled selected>Kies een vraagtype</option>
                    <option value="multipleChoice">Multiple Choice</option>
                    <option value="openVraag">Open Vraag</option>
                </select>
            </div>

            <!-- Multiple Choice Vraag -->
            <div id="multipleChoiceSection" class="content" style="display: none;">
                <label for="question">Multiple Choice Vraag:</label>
                <textarea id="question" name="question" placeholder="Typ hier de vraag..."></textarea>

                <div class="content">
                    <label for="options">Opties:</label>
                    <input type="text" id="option1" name="option1" placeholder="Optie 1">
                    <input type="text" id="option2" name="option2" placeholder="Optie 2">
                    <input type="text" id="option3" name="option3" placeholder="Optie 3">
                    <input type="text" id="option4" name="option4" placeholder="Optie 4">
                </div>
            </div>

            <!-- Open Vraag -->
            <div id="openVraagSection" class="content" style="display: none;">
                <label for="openQuestion">Open Vraag:</label>
                <textarea id="openQuestion" name="openQuestion" placeholder="Typ hier de vraag..."></textarea>
            </div>

            <button type="submit" class="content">Voeg Vraag Toe</button>
        </form>

        <!-- Quiz Afronden-knop -->
        <button id="finishQuiz" class="content">Afronden en Opslaan</button>
    </div>
</div>

<!-- JavaScript -->
<script>
    const questionList = document.getElementById('questionList');
    const quizForm = document.getElementById('quizForm');
    const questionType = document.getElementById('questionType');
    const multipleChoiceSection = document.getElementById('multipleChoiceSection');
    const openVraagSection = document.getElementById('openVraagSection');
    const finishQuiz = document.getElementById('finishQuiz');
    const quizNameSection = document.getElementById('quizNameSection');

    let questionCount = 0;
    const quizData = {
        name: '',
        questions: []
    };

    // Toon/verberg secties gebaseerd op vraagtype
    questionType.addEventListener('change', function () {
        if (this.value === 'multipleChoice') {
            multipleChoiceSection.style.display = 'block';
            openVraagSection.style.display = 'none';
        } else if (this.value === 'openVraag') {
            openVraagSection.style.display = 'block';
            multipleChoiceSection.style.display = 'none';
        }
    });

    // Voeg vraag toe
    quizForm.addEventListener('submit', function (event) {
        event.preventDefault();

        // Zet quiznaam alleen de eerste keer
        const quizName = document.getElementById('quizName').value;
        if (!quizData.name) {
            quizData.name = quizName;
            quizNameSection.style.display = 'none'; // Verberg quiznaam sectie
        }

        let questionText = '';
        let options = [];
        if (questionType.value === 'multipleChoice') {
            questionText = document.getElementById('question').value;
            options = [
                document.getElementById('option1').value,
                document.getElementById('option2').value,
                document.getElementById('option3').value,
                document.getElementById('option4').value
            ].filter(opt => opt.trim() !== '');
        } else if (questionType.value === 'openVraag') {
            questionText = document.getElementById('openQuestion').value;
        }

        if (questionText.trim() !== '') {
            questionCount++;
            quizData.questions.push({
                type: questionType.value,
                text: questionText,
                options: options
            });

            // Voeg vraag toe aan de lijst van vragen
            const li = document.createElement('li');
            li.innerHTML = `<strong>Vraag ${questionCount}:</strong> ${questionText}`;
            questionList.appendChild(li);

            // Reset de form zodat de gebruiker verder kan met het toevoegen van meer vragen
            quizForm.reset();
            multipleChoiceSection.style.display = 'none';
            openVraagSection.style.display = 'none';
        }
    });

    // Afronden en opslaan
    finishQuiz.addEventListener('click', function () {
        if (quizData.questions.length === 0) {
            alert('Voeg ten minste één vraag toe.');
            return;
        }

        // Haal bestaande quizzen op uit localStorage en voeg de nieuwe quiz toe
        let quizzes = JSON.parse(localStorage.getItem('quizzes')) || [];
        quizzes.push(quizData);

        // Sla de quizzen weer op in localStorage
        localStorage.setItem('quizzes', JSON.stringify(quizzes));

        console.log('Quiz opgeslagen:', quizData);
        alert(`Quiz "${quizData.name}" is opgeslagen!`);

        // Reset quizdata voor een nieuwe quiz
        questionList.innerHTML = '';
        quizData.name = '';
        quizData.questions = [];
    });
</script>

</body>
</html>
